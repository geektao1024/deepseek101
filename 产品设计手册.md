# LemoBook 产品设计手册

## 1. 产品概述

LemoBook 是一个创新的开源网站解决方案,它通过结合 Next.js、Tailwind CSS 和 GitHub API 实现了无需传统数据库的动态网站内容管理系统。该方案特别适合个人博客、文档站点或中小型网站使用。

### 1.1 核心价值主张

- 无数据库架构,降低部署和维护成本
- 利用 GitHub 进行内容版本控制和协作
- 现代化的技术栈,确保良好的开发体验
- 响应式设计,适配各种设备
- SEO 友好,有利于搜索引擎收录

### 1.2 产品特色
- 基于文件的内容管理
  - 使用 Markdown 文件存储文章内容
  - 使用 JSON 文件管理元数据
  - 支持版本控制和历史追踪
- 现代化的用户界面
  - 响应式布局设计
  - 优雅的动画过渡效果
  - 符合人体工程学的交互设计
- 高性能架构
  - 静态页面生成(SSG)
  - 增量静态再生成(ISR)
  - 客户端导航和预加载

## 2. 技术架构

### 2.1 核心技术栈

- 前端框架: Next.js 14
- UI 框架: Tailwind CSS + Shadcn/UI
- 内容存储: GitHub API
- 内容格式: Markdown
- 部署平台: Vercel

### 2.2 系统架构

LemoBook 采用前后端分离的架构设计:

- 前端: Next.js + React 构建的 SSR 应用
- API 层: Next.js API Routes 处理请求
- 存储层: GitHub Repository 存储内容
- 认证层: JWT + 环境变量配置

### 2.3 组件设计
1. UI 基础组件
   - Button: 多样式按钮组件,支持图标、加载状态
   - Input/Textarea: 表单输入组件,支持验证和状态
   - Card: 卡片容器组件,支持悬停效果
   - Dialog: 模态对话框组件
   - Table: 数据表格组件,支持排序和分页
   - Alert: 提示信息组件,支持多种状态

2. 业务组件
   - ArticleLayout: 文章页面布局
     - 左侧标签导航
     - 中间内容区域
     - 右侧目录导航
   - ArticleList: 文章列表组件
     - 网格/列表视图切换
     - 标签筛选
     - 分页控制
   - ResourceList: 资源列表组件
     - 自适应网格布局
     - 图标自动获取
     - 外部链接优化

### 2.4 数据流设计
1. 文章数据流
   - 创建: 编辑器 -> API -> GitHub
   - 读取: GitHub -> getStaticProps -> 页面渲染
   - 更新: 编辑器 -> API -> GitHub -> 重新构建
   - 删除: API -> GitHub -> 清理缓存

2. 资源数据流
   - 配置文件管理
   - 自动图标获取
   - 链接有效性验证

## 3. 核心功能模块

### 3.1 前台展示系统

1. 文章展示
   - 文章列表页
   - 文章详情页
   - 分类浏览
   - 搜索功能

2. 资源导航
   - 资源列表展示
   - 外部链接跳转
   - 资源分类

### 3.2 后台管理系统

1. 用户认证
   - 管理员登录
   - 会话管理
   - 权限控制

2. 内容管理
   - 文章 CRUD
   - 资源管理
   - Markdown 编辑器
   - 文件上传

### 3.3 性能优化模块
1. 静态资源优化
   - 图片懒加载和优化
   - 字体加载优化
   - 资源预加载策略

2. 交互性能优化
   - 防抖和节流处理
   - 虚拟滚动
   - 骨架屏加载

### 3.4 SEO 优化模块
1. 元数据管理
   - 动态标题和描述
   - Open Graph 协议支持
   - 结构化数据

2. 性能指标优化
   - Core Web Vitals 优化
   - 加载性能优化
   - 可访问性优化

## 4. 数据结构设计

### 4.1 文章(Article)
```json
{
"title": "文章标题",
"description": "文章描述",
"date": "发布日期",
"lastModified": "最后修改时间",
"path": "文件路径"
}
```

### 4.2 资源(Resource)
```json
{
"name": "资源名称",
"description": "资源描述",
"url": "资源链接"
}
```

### 4.3 配置数据

## 5. API 接口设计

### 5.1 文章接口
- GET /api/articles - 获取文章列表
- POST /api/articles/create - 创建新文章
- PUT /api/articles/[id] - 更新文章
- DELETE /api/articles/[id] - 删除文章

### 5.2 资源接口
- GET /api/resources - 获取资源列表
- POST /api/resources - 更新资源列表

### 5.3 认证接口
- POST /api/login - 管理员登录
- POST /api/logout - 退出登录

### 5.4 文件处理接口
- POST /api/images/upload - 上传图片
- POST /api/images/delete - 删除图片
- GET /api/images/list - 获取图片列表

### 5.5 系统接口
- GET /api/health - 健康检查
- GET /api/config - 获取配置
- POST /api/rebuild - 触发重新构建

## 6. 安全设计

### 6.1 访问控制
- 基于环境变量的访问密码
- JWT token 认证机制
- API 路由保护

### 6.2 数据安全
- GitHub Token 权限控制
- 内容版本控制
- 自动备份机制

### 6.3 运行时安全
- XSS 防护
- CSRF 防护
- 请求限流
- 错误处理

## 7. 部署方案

### 7.1 环境要求
- Node.js >= 14
- GitHub 账号
- Vercel 账号

### 7.2 必要配置
环境变量:
- GITHUB_TOKEN: GitHub 访问令牌
- GITHUB_OWNER: 仓库所有者
- GITHUB_REPO: 仓库名称
- ACCESS_PASSWORD: 管理员密码

### 7.3 CI/CD 流程
1. 代码提交
   - 代码风格检查
   - 类型检查
   - 单元测试

2. 构建流程
   - 依赖安装
   - 代码构建
   - 静态资源优化

3. 部署流程
   - 环境变量注入
   - 静态文件部署
   - 缓存清理

## 8. 性能优化

### 8.1 前端优化
- Next.js 静态页面生成
- 图片懒加载
- 组件按需加载
- 路由预加载

### 8.2 API 优化
- 数据缓存
- 请求合并
- 响应压缩

### 8.3 构建优化
- 代码分割策略
- 依赖优化
- 构建缓存利用

### 8.4 运行时优化
- 内存使用优化
- 计算性能优化
- 网络请求优化

## 9. 扩展性设计

### 9.1 主题系统
- 自定义主题支持
- 动态样式切换
- 响应式适配

### 9.2 插件机制
- 评论系统集成
- 统计分析
- 第三方服务集成

### 9.3 集成能力
- 统计分析集成
- 搜索服务集成
- CDN 服务集成

### 9.4 自动化能力
- 内容同步
- 图片处理
- 部署流程

## 10. 后续规划

### 10.1 近期计划
- [ ] SEO 优化
- [ ] 评论功能
- [ ] 图片管理
- [ ] 多语言支持

### 10.2 长期规划
- [ ] 多用户支持
- [ ] 自定义主题市场
- [ ] 插件系统
- [ ] 工作流自动化

### 10.3 性能优化计划
- [ ] 引入 Service Worker
- [ ] 实现离线功能
- [ ] 优化首屏加载

### 10.4 功能增强计划
- [ ] 文章订阅
- [ ] 站内搜索
- [ ] 数据统计

## 11. 开源协议

本项目采用 MIT 许可证开源，详见项目根目录的 LICENSE 文件。

## 12. 贡献指南
1. 开发规范
   - 代码风格
   - 提交信息规范
   - 分支管理策略

2. 文档规范
   - 文档结构
   - API 文档
   - 示例代码

3. 社区规范
   - 行为准则
   - 问题模板
   - PR 模板